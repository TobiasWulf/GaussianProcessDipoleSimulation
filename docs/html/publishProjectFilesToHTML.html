
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>publishProjectFilesToHTML</title><meta name="generator" content="MATLAB 9.9"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2020-10-28"><meta name="DC.source" content="publishProjectFilesToHTML.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; }

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }
span.typesection { color:#A0522D }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h1>publishProjectFilesToHTML</h1><!--introduction--><p>The is script is used to publish all toolbox included files to HTML documentation folder docs/html. The script runs a section with certain options for each project part and uses the built-in function to generate the documentation files. For a complete documentation support each generated html document needs to get listed in the project helptoc file with toc entry.</p><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#1">Requirements</a></li><li><a href="#2">See Also</a></li><li><a href="#3">Start Publishing Script and Clean Up</a></li><li><a href="#4">Publish Options</a></li><li><a href="#5">Project Documentation Files</a></li><li><a href="#6">Executable Script Files</a></li><li><a href="#7">Util Function and Classes</a></li><li><a href="#8">Build Documentation Database for Matlab Help Browser</a></li><li><a href="#9">Open Generated Documentation.</a></li></ul></div><h2 id="1">Requirements</h2><div><ul><li>Other m-files required: ../src/util/removeFilesFromDir.m</li><li>Subfunctions: None</li><li>MAT-files required: None</li></ul></div><h2 id="2">See Also</h2><div><ul><li><a href="matlab:web(fullfile(docroot,'matlab/ref/publish.html'))">publish</a></li><li><a href="matlab:web(fullfile(docroot,'matlab/ref/fullfile.html'))">fullfile</a></li><li><a href="matlab:web(fullfile(docroot,'matlab/ref/builddocsearchdb.html'))">builddocsearchdb</a></li><li><a href="removeFilesFromDir.html">removeFilesFromDir</a></li></ul></div><p>Created on September 21. 2020 by Tobias Wulf. Copyright Tobias Wulf 2020.</p><p>
<!--
Hidden Clutter.
Edited on Month DD. YYYY by Editor: Single line description.
Edited on September 21. 2020 by Tobias Wulf: Added first publish documents.
Edited on September 22. 2020 by Tobias Wulf: Add Sript section.
Edited on September 23. 2020 by Tobias Wulf: Add helpsearch section (Build).
Edited on September 30. 2020 by Tobias Wulf: Improve helpsearch rewrite.
Edited on September 30. 2020 by Tobias Wulf: Add Project_Preparation.m.
Edited on October 01. 2020 by Tobias Wulf: Add open documention section.
Edited on October 02. 2020 by Tobias Wulf: Rename Flows.m to Work_Flows.m
Edited on October 02. 2020 by Tobias Wulf: See also manually links (evalCode).
Edited on October 07. 2020 by Tobias Wulf: Add Project_Structure.m.
Edited on October 07. 2020 by Tobias Wulf: Git Feature Branch Workflow.
Edited on October 10. 2020 by Tobias Wulf: Add Documentation Workflow.
Edited on October 10. 2020 by Tobias Wulf: Add Source Code.
Edited on October 10. 2020 by Tobias Wulf: Add Util Functions and Classes.
Edited on October 10. 2020 by Tobias Wulf: Add removeFilesFromDir.
Edited on October 12. 2020 by Tobias Wulf: Get root folder from project.
Edited on October 24. 2020 by Tobias Wulf: Add plotFunctions.m.
Edited on October 26. 2020 by Tobias Wulf: Add plotTDKCharDataset.m.
Edited on October 27. 2020 by Tobias Wulf: Add Datasets.m.
Edited on October 27. 2020 by Tobias Wulf: Add TDK_TAS2141_Characterization.m.
-->
</p><h2 id="3">Start Publishing Script and Clean Up</h2><p>At first clean up junk from workspace and clear prompt for new output. Set project root path to create absolute file path with fullfile function. Relative path objective can be lead to shadowing file errors. Get project folder or root directory from matlab project instance. Project must be open.</p><pre class="codeinput">clearvars;
clc;
disp(<span class="string">'Workspace cleaned up ...'</span>);
projectInstance = matlab.project.currentProject;
rootPath = projectInstance.RootFolder;
disp(<span class="string">'Set project root path to ...'</span>);
disp(rootPath);
</pre><h2 id="4">Publish Options</h2><p>These are general options for documents to publish. They are passed to the matlab publish function via a struct where each option gets its own field. The option struct can be copied and adjusted for differing publish conditions in example for scripts, functions, and bare document m-files. Initialize the option struct with output format field name and field value and add further fields (options) with point value.</p><pre class="codeinput">PublishOptions = struct(<span class="string">'format'</span>, <span class="string">'html'</span>);
PublishOptions.outputDir = fullfile(rootPath, <span class="string">'docs'</span>, <span class="string">'html'</span>);
PublishOptions.stylesheet = fullfile(matlabroot, <span class="string">'toolbox'</span>, <span class="string">'matlab'</span>, <span class="keyword">...</span>
    <span class="string">'codetools'</span>, <span class="string">'private'</span>, <span class="string">'mxdom2simplehtml.xsl'</span>);
PublishOptions.createThumbnail = false;
PublishOptions.figureSnapMethod = <span class="string">'entireFigureWindow'</span>;
PublishOptions.imageFormat = <span class="string">'png'</span>;
PublishOptions.maxHeight = [];
PublishOptions.maxWidth = [];
PublishOptions.useNewFigure = false;
PublishOptions.evalCode = false;
PublishOptions.catchError = true;
PublishOptions.codeToEvaluate = [];
PublishOptions.maxOutputLines = Inf;
PublishOptions.showCode = true;
disp(<span class="string">'Set general publishing options to ...'</span>);
disp(PublishOptions);
</pre><h2 id="5">Project Documentation Files</h2><p>In this section of the publish script every bare documentation script should be handled and executed to publish. These are m-files without any executeable code so they exist just to transport the documentation content into html output. The files are passed with fullfile to a cell array which is looped to the publish function passed options for publishing</p><pre class="codeinput">disp(<span class="string">'Publish project documentation files ...'</span>);
projectDocFiles = { <span class="keyword">...</span>
    fullfile(rootPath, <span class="string">'docs'</span>, <span class="string">'Introduction.m'</span>), <span class="keyword">...</span>
    fullfile(rootPath, <span class="string">'docs'</span>, <span class="string">'Workflows.m'</span>), <span class="keyword">...</span>
    fullfile(rootPath, <span class="string">'docs'</span>, <span class="string">'Project_Preparation.m'</span>), <span class="keyword">...</span>
    fullfile(rootPath, <span class="string">'docs'</span>, <span class="string">'Executable_Scripts.m'</span>), <span class="keyword">...</span>
    fullfile(rootPath, <span class="string">'docs'</span>, <span class="string">'Project_Structure.m'</span>), <span class="keyword">...</span>
    fullfile(rootPath, <span class="string">'docs'</span>, <span class="string">'Git_Feature_Branch_Workflow.m'</span>), <span class="keyword">...</span>
    fullfile(rootPath, <span class="string">'docs'</span>, <span class="string">'Documentation_Workflow.m'</span>), <span class="keyword">...</span>
    fullfile(rootPath, <span class="string">'docs'</span>, <span class="string">'Source_Code.m'</span>), <span class="keyword">...</span>
    fullfile(rootPath, <span class="string">'docs'</span>, <span class="string">'Util_Functions_and_Classes.m'</span>), <span class="keyword">...</span>
    fullfile(rootPath, <span class="string">'docs'</span>, <span class="string">'plotFunctions.m'</span>), <span class="keyword">...</span>
    fullfile(rootPath, <span class="string">'docs'</span>, <span class="string">'Datasets.m'</span>), <span class="keyword">...</span>
    fullfile(rootPath, <span class="string">'docs'</span>, <span class="string">'TDK_TAS2141_Characterization.m'</span>), <span class="keyword">...</span>
};
disp(<span class="string">'Project documentation files collected ...'</span>);
disp(<span class="string">'Publishing ...'</span>);
<span class="keyword">for</span> docToPublish = projectDocFiles
    disp(docToPublish{:});
    publishedFile = publish(docToPublish{:}, PublishOptions);
    disp(publishedFile)
<span class="keyword">end</span>
</pre><h2 id="6">Executable Script Files</h2><p>The section collects all ready to execute scripts from project scripts folder and publish them to html documentation folder. Every script must be notice in in Executable_Scripts.m file with one line description. To gain control of script execution during the publish porcess a second cell parameter is added to the script path. The parameter indicates if the script is executed or not. That is very important if scripts contains critical or loop gaining code. In example the publishProjectFilesToHTML.m script such loop gaining code. If eval code during publishing is enabled the script starts publishing itself over and over again because it contains the loop entry via the publish function. So routine is minmal adjusted by evalCode parameter in PublishOptions struct.</p><pre class="codeinput">disp(<span class="string">'Publish executable scripts ...'</span>);
executableScriptFiles = { <span class="keyword">...</span>
    {fullfile(rootPath, <span class="string">'scripts'</span>, <span class="string">'publishProjectFilesToHTML.m'</span>), false}, <span class="keyword">...</span>
};
disp(<span class="string">'Executable script files collected ...'</span>);
disp(<span class="string">'Publishing ...'</span>);
<span class="keyword">for</span> scriptToPublish = executableScriptFiles
    disp(scriptToPublish{1}{1});
    PublishOptions.evalCode = scriptToPublish{1}{2};
    publishedFile = publish(scriptToPublish{1}{1}, PublishOptions);
    disp(publishedFile);
<span class="keyword">end</span>
</pre><h2 id="7">Util Function and Classes</h2><p>That part of the publish script collects function and class m-files from the util section of the source code located in src/util. Introcude every new m-file to the Util_Functions_and_Classes.m and add a short description. In general functions and class files are not executed on publishing execution so set evalCode option to false in PublishOptions struct. In addition to that the source code itself should not be in the published document, so the showCode option is switched to false.</p><pre class="codeinput">PublishOptions.evalCode = false;
PublishOptions.showCode = false;
disp(<span class="string">'Publish util functions and classes ...'</span>);
utilFunctionClassesFiles = { <span class="keyword">...</span>
    fullfile(rootPath, <span class="string">'src'</span>, <span class="string">'util'</span>, <span class="string">'removeFilesFromDir.m'</span>), <span class="keyword">...</span>
    fullfile(rootPath, <span class="string">'src'</span>, <span class="string">'util'</span>, <span class="string">'plotFunctions'</span>, <span class="string">'plotTDKCharDataset.m'</span>), <span class="keyword">...</span>
};
disp(<span class="string">'Util function and class files collected ...'</span>);
disp(<span class="string">'Publishing ...'</span>);
<span class="keyword">for</span> utilToPublish = utilFunctionClassesFiles
    disp(utilToPublish{:});
    publishedFile = publish(utilToPublish{:}, PublishOptions);
    disp(publishedFile)
<span class="keyword">end</span>
</pre><h2 id="8">Build Documentation Database for Matlab Help Browser</h2><p>To support Matlabs help browser it is needed build searchable help browser entries including a searchable database backend. Matlabs built-in function builddocsearchdb does the trick. The function just needs the output directory of builded html documentation and it creates a subfolder which includes the database. About the info.xml from the project root and the helptoc.xml file the html documentation folder all listet documentation is accessable. At first remove old database before build the new reference database. Remove autogenerated directory helpsearch-v3. At first get folder content and remove first two relative directory entries from struct. Then delete files and check if files do not exist any more. At least build up new search database entries to Matlab help.</p><pre class="codeinput">disp(<span class="string">'Remove old search entries ...'</span>);
removeStatus = removeFilesFromDir( <span class="keyword">...</span>
    fullfile(rootPath, <span class="string">'docs'</span>, <span class="string">'html'</span>, <span class="string">'helpsearch-v3'</span>));
<span class="keyword">if</span> removeStatus
    builddocsearchdb(PublishOptions.outputDir);
    disp(<span class="string">'Search entries generated ...'</span>);
<span class="keyword">else</span>
    disp(<span class="string">'Could not remove old search entries ...'</span>);
<span class="keyword">end</span>
disp(<span class="string">'Done ...'</span>);
</pre><h2 id="9">Open Generated Documentation.</h2><p>Open generated HTML documentation from documentation root HTML file which should be a project introduction or project roadmap page. Comment out if this script is added to project shutdown tasks.</p><pre class="codeinput">open(fullfile(PublishOptions.outputDir, <span class="string">'Datasets.html'</span>));
</pre><p class="footer"><br><a href="https://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2020b</a><br></p></div><!--
##### SOURCE BEGIN #####
%% publishProjectFilesToHTML
% The is script is used to publish all toolbox included files to HTML
% documentation folder docs/html. The script runs a section with certain
% options for each project part and uses the built-in function to generate the
% documentation files. For a complete documentation support each generated html
% document needs to get listed in the project helptoc file with toc entry.
%
%
%% Requirements
% * Other m-files required: ../src/util/removeFilesFromDir.m
% * Subfunctions: None
% * MAT-files required: None
%
%
%% See Also
% * <matlab:web(fullfile(docroot,'matlab/ref/publish.html')) publish>
% * <matlab:web(fullfile(docroot,'matlab/ref/fullfile.html')) fullfile>
% * <matlab:web(fullfile(docroot,'matlab/ref/builddocsearchdb.html')) builddocsearchdb>
% * <removeFilesFromDir.html removeFilesFromDir>
%
%
% Created on September 21. 2020 by Tobias Wulf. Copyright Tobias Wulf 2020.
%
% <html>
% <!REPLACE_WITH_DASH_DASH
% Hidden Clutter.
% Edited on Month DD. YYYY by Editor: Single line description.
% Edited on September 21. 2020 by Tobias Wulf: Added first publish documents.
% Edited on September 22. 2020 by Tobias Wulf: Add Sript section.
% Edited on September 23. 2020 by Tobias Wulf: Add helpsearch section (Build).
% Edited on September 30. 2020 by Tobias Wulf: Improve helpsearch rewrite.
% Edited on September 30. 2020 by Tobias Wulf: Add Project_Preparation.m.
% Edited on October 01. 2020 by Tobias Wulf: Add open documention section.
% Edited on October 02. 2020 by Tobias Wulf: Rename Flows.m to Work_Flows.m
% Edited on October 02. 2020 by Tobias Wulf: See also manually links (evalCode).
% Edited on October 07. 2020 by Tobias Wulf: Add Project_Structure.m.
% Edited on October 07. 2020 by Tobias Wulf: Git Feature Branch Workflow.
% Edited on October 10. 2020 by Tobias Wulf: Add Documentation Workflow.
% Edited on October 10. 2020 by Tobias Wulf: Add Source Code.
% Edited on October 10. 2020 by Tobias Wulf: Add Util Functions and Classes.
% Edited on October 10. 2020 by Tobias Wulf: Add removeFilesFromDir.
% Edited on October 12. 2020 by Tobias Wulf: Get root folder from project.
% Edited on October 24. 2020 by Tobias Wulf: Add plotFunctions.m.
% Edited on October 26. 2020 by Tobias Wulf: Add plotTDKCharDataset.m.
% Edited on October 27. 2020 by Tobias Wulf: Add Datasets.m.
% Edited on October 27. 2020 by Tobias Wulf: Add TDK_TAS2141_Characterization.m.
% REPLACE_WITH_DASH_DASH>
% </html>
%
%
%% Start Publishing Script and Clean Up
% At first clean up junk from workspace and clear prompt for new output. Set
% project root path to create absolute file path with fullfile function.
% Relative path objective can be lead to shadowing file errors. Get project
% folder or root directory from matlab project instance. Project must be open.
clearvars;
clc;
disp('Workspace cleaned up ...');
projectInstance = matlab.project.currentProject;
rootPath = projectInstance.RootFolder;
disp('Set project root path to ...');
disp(rootPath);

%% Publish Options
% These are general options for documents to publish. They are passed to the
% matlab publish function via a struct where each option gets its own field.
% The option struct can be copied and adjusted for differing publish
% conditions in example for scripts, functions, and bare document m-files.
% Initialize the option struct with output format field name and field value
% and add further fields (options) with point value.
PublishOptions = struct('format', 'html');
PublishOptions.outputDir = fullfile(rootPath, 'docs', 'html');
PublishOptions.stylesheet = fullfile(matlabroot, 'toolbox', 'matlab', ...
    'codetools', 'private', 'mxdom2simplehtml.xsl');
PublishOptions.createThumbnail = false;
PublishOptions.figureSnapMethod = 'entireFigureWindow';
PublishOptions.imageFormat = 'png';
PublishOptions.maxHeight = [];
PublishOptions.maxWidth = [];
PublishOptions.useNewFigure = false;
PublishOptions.evalCode = false;
PublishOptions.catchError = true;
PublishOptions.codeToEvaluate = [];
PublishOptions.maxOutputLines = Inf;
PublishOptions.showCode = true;
disp('Set general publishing options to ...');
disp(PublishOptions);

%% Project Documentation Files
% In this section of the publish script every bare documentation script should
% be handled and executed to publish. These are m-files without any executeable
% code so they exist just to transport the documentation content into html
% output. The files are passed with fullfile to a cell array which is looped to
% the publish function passed options for publishing
disp('Publish project documentation files ...');
projectDocFiles = { ...
    fullfile(rootPath, 'docs', 'Introduction.m'), ...
    fullfile(rootPath, 'docs', 'Workflows.m'), ...
    fullfile(rootPath, 'docs', 'Project_Preparation.m'), ...
    fullfile(rootPath, 'docs', 'Executable_Scripts.m'), ...
    fullfile(rootPath, 'docs', 'Project_Structure.m'), ...
    fullfile(rootPath, 'docs', 'Git_Feature_Branch_Workflow.m'), ...
    fullfile(rootPath, 'docs', 'Documentation_Workflow.m'), ...
    fullfile(rootPath, 'docs', 'Source_Code.m'), ...
    fullfile(rootPath, 'docs', 'Util_Functions_and_Classes.m'), ...
    fullfile(rootPath, 'docs', 'plotFunctions.m'), ...
    fullfile(rootPath, 'docs', 'Datasets.m'), ...
    fullfile(rootPath, 'docs', 'TDK_TAS2141_Characterization.m'), ...
};
disp('Project documentation files collected ...');
disp('Publishing ...');
for docToPublish = projectDocFiles
    disp(docToPublish{:});
    publishedFile = publish(docToPublish{:}, PublishOptions);
    disp(publishedFile)
end

%% Executable Script Files
% The section collects all ready to execute scripts from project scripts folder
% and publish them to html documentation folder. Every script must be notice in
% in Executable_Scripts.m file with one line description. To gain control of
% script execution during the publish porcess a second cell parameter is added
% to the script path. The parameter indicates if the script is executed or not.
% That is very important if scripts contains critical or loop gaining code. In
% example the publishProjectFilesToHTML.m script such loop gaining code. If
% eval code during publishing is enabled the script starts publishing itself
% over and over again because it contains the loop entry via the publish
% function. So routine is minmal adjusted by evalCode parameter in
% PublishOptions struct.
disp('Publish executable scripts ...');
executableScriptFiles = { ...
    {fullfile(rootPath, 'scripts', 'publishProjectFilesToHTML.m'), false}, ...
};
disp('Executable script files collected ...');
disp('Publishing ...');
for scriptToPublish = executableScriptFiles
    disp(scriptToPublish{1}{1});
    PublishOptions.evalCode = scriptToPublish{1}{2};
    publishedFile = publish(scriptToPublish{1}{1}, PublishOptions);
    disp(publishedFile);
end

%% Util Function and Classes
% That part of the publish script collects function and class m-files from the
% util section of the source code located in src/util. Introcude every new
% m-file to the Util_Functions_and_Classes.m and add a short description.
% In general functions and class files are not executed on publishing execution
% so set evalCode option to false in PublishOptions struct. In addition to that
% the source code itself should not be in the published document, so the
% showCode option is switched to false.
PublishOptions.evalCode = false;
PublishOptions.showCode = false;
disp('Publish util functions and classes ...');
utilFunctionClassesFiles = { ...
    fullfile(rootPath, 'src', 'util', 'removeFilesFromDir.m'), ...
    fullfile(rootPath, 'src', 'util', 'plotFunctions', 'plotTDKCharDataset.m'), ...
};
disp('Util function and class files collected ...');
disp('Publishing ...');
for utilToPublish = utilFunctionClassesFiles
    disp(utilToPublish{:});
    publishedFile = publish(utilToPublish{:}, PublishOptions);
    disp(publishedFile)
end

%% Build Documentation Database for Matlab Help Browser
% To support Matlabs help browser it is needed build searchable help browser
% entries including a searchable database backend. Matlabs built-in function
% builddocsearchdb does the trick. The function just needs the output directory
% of builded html documentation and it creates a subfolder which includes the
% database. About the info.xml from the project root and the helptoc.xml file
% the html documentation folder all listet documentation is accessable.
% At first remove old database before build the new reference database.
% Remove autogenerated directory helpsearch-v3. At first get folder content and
% remove first two relative directory entries from struct. Then delete files
% and check if files do not exist any more. At least build up new search
% database entries to Matlab help.
disp('Remove old search entries ...');
removeStatus = removeFilesFromDir( ...
    fullfile(rootPath, 'docs', 'html', 'helpsearch-v3'));
if removeStatus
    builddocsearchdb(PublishOptions.outputDir);
    disp('Search entries generated ...');
else
    disp('Could not remove old search entries ...');
end
disp('Done ...');

%% Open Generated Documentation.
% Open generated HTML documentation from documentation root HTML file which
% should be a project introduction or project roadmap page. Comment out if this
% script is added to project shutdown tasks.
open(fullfile(PublishOptions.outputDir, 'Datasets.html'));

##### SOURCE END #####
--></body></html>