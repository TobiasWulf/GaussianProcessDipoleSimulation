
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            TeX: {extensions: ["mhchem.js"]},
            extensions: ["tex2jax.js"],
            jax: ["input/TeX", "output/HTML-CSS"],
            tex2jax: {
                inlineMath: [['$','$'], ['\\(','\\)']],
                displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
                processEscapes: true
            },
            CommonHTML: {minScaleAdjust: 110,},
            "HTML-CSS": {
                availableFonts: ["TeX"],
                scale: 110
            }
        });
        MathJax.Hub.Queue(["Rerender", MathJax.Hub], function () {window.status="finished"});
    </script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>Training and Test Datasets</title><meta name="generator" content="MATLAB 9.9"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2021-05-14"><meta name="DC.source" content="Training_and_Test_Datasets.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; }

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }
span.typesection { color:#A0522D }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h1>Training and Test Datasets</h1><!--introduction--><p>Training and test datasets are generated by sensor array simulation part of the software. One dataset contains the simulation results generated with current configuration of used magnet in simulation and a setup of position and sensor behavior. The simulation computes for configured angles with certain angle resultion the magnetic field strength at sensor array member position for a rotation of the magnet through the configured angles. With respect to positions and angles the simulation maps the field strength for each array member to specified characterization field (current TDK Rise) and interpolates (nearest neighbor) the sensor bridge output voltages for cosine and sine bridge for each sensor array member. The acquired data is saved in matrices with same orientation as sensor array member matrice or coordinate matrices of the sensor array, so it completes the rotation in related data matrices.</p><p><b>Training and test datasets filenames are build by a certain pattern.</b></p><p>[Training|Test]_YYYY-mm-dd-_HH-MM-SS-FFF.mat</p><p>They are saved under data path data/training and data/test.</p><p>A best practice can been seen in workflow topic of the documentation.</p><!--/introduction--><h2 id="1">Dataset Structure</h2><p><b>Info:</b></p><p>A training ot test dataset is separated into two main structures the first one the Info struct contains information about the simulation configuration and setup in which the simulation constructed the dataset.</p><div><ul><li><b>SensorArrayOptions</b> - struct, contains setting of sensor size and behavior</li><li><b>DipoleOptions</b> - struct, contains setting of used magnet which was used in   the simulation</li><li><b>UseOptions</b> - struct, contains information about use of the dataset if it   is constructed for training or test use, sensor array position, number of   angles, tilt of magnet and so on.</li><li>CharData - string, identifies the characteriazation data set which was used   to simulate the array members.</li><li><b>Units</b> - struct, si units of data in datasets</li><li>filePath - string, which points on the absolute path origin where the   dataset was saved including filename.</li></ul></div><div><ul><li><b>SensorOptions:</b></li></ul></div><div><ul><li>geometry - char, indentifier string of which shape the sensor array   geometry was constructed, geometry of used meshgrid in computation</li><li>dimension - double, number of sensors at one array edge for square geometry</li><li>edge - double, edge lenght in mm of sensor array</li><li>Vcc - double,  supply voltage of the sensor array</li><li>Voff - double, bridge offset voltage off the sensor array</li><li>Vnorm - double, norm value to get voltage values from characterization   fields in combination with Vcc and Voff, TDK dataset is normed in mV/V.</li><li>SensorCount, double - number of sensors in the sensor array for square   geometry it is square or dimension</li></ul></div><div><ul><li><b>DipoleOptions:</b></li></ul></div><div><ul><li>sphereRadius - double, radius in mm around dipole magnet to approximate a   spherical magnet in simulation with far field approximation (dipole field   equation)</li><li>H0mag - double, field strenght magnitude in kA/m which is imprinted on the   compute field strength of the used magnet in a certain distance from magnet   surface to construct magnet with fitting characteristics for simulation.</li><li>z0 - double, distance from surface in which H0mag is imprinted on field   computed field strength of the used magnet. Imprinting respects magnet tilts   so the distance is always set to the magnet z-axis with no shifts in x and y   direction</li><li>M0mag - double, magnetic dipole moment magnitude which is used to define the   magnetization direction of the magnet in tis rest position.</li></ul></div><div><ul><li><b>UseOptions:</b></li></ul></div><div><ul><li>useCase - string, identifies the dataset if it is for training or test   purpose</li><li>xPos - double, relative sensor array position to magnet surface</li><li>yPos - double, relative sensor array position to magnet surface</li><li>zPos - double, relative sensor array position to magnet surface</li><li>tilt - double, magnet tilt in z-axis</li><li>angleRes - double, angle resolution of rotation angles in simulation</li><li>phaseIndex - double, start phase of rotation as index of full scale rotation   angles with angleRes</li><li>nAngles - double, number of rotation angles in datasets</li><li>BaseReference - char, identifier which characterization dataset was loaded</li><li>BridgeReference - char, identifier which reference from characteriazation   dataset was used to generate cosine and sine voltages</li></ul></div><div><ul><li><b>Units:</b></li></ul></div><div><ul><li>SensorOutputVoltage - char, si unit of sensor bridge outputs</li><li>MagneticFieldStrength - char, si unit of magnetic field strength</li><li>Angles - char, si unit of angles</li><li>Length - char, si unit of metric length</li></ul></div><p><b>Data:</b></p><div><ul><li>HxScale - 1 x L double vector of Hx field strength amplitudes used in   charcteriztion to construct sensor characterization references, x scale for   characterization reference</li><li>HyScale - 1 x L double vector of Hy field strength amplitudes used in   charcteriztion to construct sensor characterization references, y scale for   characterization reference</li><li>VcosRef - L x L double matrix of cosine bridge characterization field   corresponding to HxScale and HyScale</li><li>VsinRef - L x L double matrix of sine bridge characterization field   corresponding to HxScale and HyScale</li><li>Gain - double, scalar gain factor for bridge outputs (interanl   amplification)</li><li>r0 - 3 x 1 double vector of magnet rest position from magnet surface and   respect to magnet magnet tilt, used in computation of H0norm to imprint a   certain field strength on magnets H-field, respects sphere radius of magnet</li><li>m0 - 3 x 1 vector of magnetic dipole moment in magnet rest position with   respect of manget tilt, used to compute H0norm to imprint a certain field   strength on magnet H-field, the magnitude of this vector is equal to M0mag</li><li>H0norm - double, scalar factor to imprint a certain field strength on magnet   H-field in rest position with respect to magnet tilt in coordinate system</li><li>m - 3 x M double vector of magnetic dipole rotation moments each 3 x 1   vector is related to i-th rotation angle</li><li>angles - 1 x M double vector of i-th rotation angles in degree</li><li>angleStep - double, scalar of angle step width in rotation</li><li>angleRefIndex - 1 x M double vector of indices which refer to a full scale   rotation of configure angle resuolution, so it abstracts a subset angle   rotation to the same rotation with all angles given by angle resolution</li><li>X - N x N double matrix of x coordinate positions of each sensor array   member</li><li>Y - N x N double matrix of y coordinate positions of each sensor array   member</li><li>Z - N x N double matrix of z coordinate positions of each sensor array   member</li><li>Hx - N x N x M double matrix of compute Hx-field strength at each sensor   array member position for each rotation angle 1...M</li><li>Hy - N x N x M double matrix of compute Hy-field strength at each sensor   array member position for each rotation angle 1...M</li><li>Hz - N x N x M double matrix of compute Hz-field strength at each sensor   array member position for each rotation angle 1...M</li><li>Habs - N x N x M double matrix of compute H-field strength magnitude at each   sensor array member position for each rotation angle 1...M</li><li>Vcos - N x N x M double matrix of computed cosine bridge outputs at each   sensor array member position for each rotation angle 1...M</li><li>Vsin - N x N x M double matrix of computed sine bridge outputs at each   sensor array member position for each rotation angle 1...M</li></ul></div><h2 id="2">See Also</h2><div><ul><li><a href="Simulation_Workflow.html">Simulation Workflow</a></li><li><a href="sensorArraySimulation.html">sensorArraySimulation</a></li><li><a href="simulateDipoleSensorArraySquareGrid.html">simulateDipoleSensorArraySquareGrid</a></li><li><a href="generateSimulationDatasets.html">generateSimulationDatasets</a></li><li><a href="generateConfigMat.html">generateConfigMat</a></li></ul></div><p>Created on December 03. 2020 by Tobias Wulf. Copyright Tobias Wulf 2020.</p><p>
<!--
Hidden Clutter.
Edited on Month DD. YYYY by Editor: Single line description.
Edited on December 03. 2020 by Tobias Wulf: Add UseOption field BaseReference.
Edited on December 05. 2020 by Tobias Wulf: Add Gain for reference voltages.
-->
</p><p class="footer"><br><a href="https://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2020b</a><br></p></div><!--
##### SOURCE BEGIN #####
%% Training and Test Datasets
% Training and test datasets are generated by sensor array simulation part of
% the software. One dataset contains the simulation results generated with
% current configuration of used magnet in simulation and a setup of position and
% sensor behavior. The simulation computes for configured angles with certain
% angle resultion the magnetic field strength at sensor array member position
% for a rotation of the magnet through the configured angles. With respect to
% positions and angles the simulation maps the field strength for each array
% member to specified characterization field (current TDK Rise) and interpolates
% (nearest neighbor) the sensor bridge output voltages for cosine and sine
% bridge for each sensor array member. The acquired data is saved in matrices
% with same orientation as sensor array member matrice or coordinate matrices
% of the sensor array, so it completes the rotation in related data matrices.
%
% *Training and test datasets filenames are build by a certain pattern.*
%
% [Training|Test]_YYYY-mm-dd-_HH-MM-SS-FFF.mat
%
% They are saved under data path data/training and data/test.
%
% A best practice can been seen in workflow topic of the documentation.
%
%
%% Dataset Structure
% *Info:*
%
% A training ot test dataset is separated into two main structures the first one
% the Info struct contains information about the simulation configuration and
% setup in which the simulation constructed the dataset.
%
% * *SensorArrayOptions* - struct, contains setting of sensor size and behavior
% * *DipoleOptions* - struct, contains setting of used magnet which was used in
%   the simulation
% * *UseOptions* - struct, contains information about use of the dataset if it
%   is constructed for training or test use, sensor array position, number of
%   angles, tilt of magnet and so on.
% * CharData - string, identifies the characteriazation data set which was used
%   to simulate the array members.
% * *Units* - struct, si units of data in datasets
% * filePath - string, which points on the absolute path origin where the
%   dataset was saved including filename.
%
% * *SensorOptions:*
%
% * geometry - char, indentifier string of which shape the sensor array
%   geometry was constructed, geometry of used meshgrid in computation
% * dimension - double, number of sensors at one array edge for square geometry
% * edge - double, edge lenght in mm of sensor array
% * Vcc - double,  supply voltage of the sensor array
% * Voff - double, bridge offset voltage off the sensor array
% * Vnorm - double, norm value to get voltage values from characterization
%   fields in combination with Vcc and Voff, TDK dataset is normed in mV/V.
% * SensorCount, double - number of sensors in the sensor array for square
%   geometry it is square or dimension
%
% * *DipoleOptions:*
%
% * sphereRadius - double, radius in mm around dipole magnet to approximate a
%   spherical magnet in simulation with far field approximation (dipole field
%   equation)
% * H0mag - double, field strenght magnitude in kA/m which is imprinted on the
%   compute field strength of the used magnet in a certain distance from magnet
%   surface to construct magnet with fitting characteristics for simulation.
% * z0 - double, distance from surface in which H0mag is imprinted on field
%   computed field strength of the used magnet. Imprinting respects magnet tilts
%   so the distance is always set to the magnet z-axis with no shifts in x and y
%   direction
% * M0mag - double, magnetic dipole moment magnitude which is used to define the
%   magnetization direction of the magnet in tis rest position.
%
% * *UseOptions:*
%
% * useCase - string, identifies the dataset if it is for training or test
%   purpose
% * xPos - double, relative sensor array position to magnet surface
% * yPos - double, relative sensor array position to magnet surface
% * zPos - double, relative sensor array position to magnet surface
% * tilt - double, magnet tilt in z-axis
% * angleRes - double, angle resolution of rotation angles in simulation
% * phaseIndex - double, start phase of rotation as index of full scale rotation
%   angles with angleRes
% * nAngles - double, number of rotation angles in datasets
% * BaseReference - char, identifier which characterization dataset was loaded
% * BridgeReference - char, identifier which reference from characteriazation
%   dataset was used to generate cosine and sine voltages
%
% * *Units:*
%
% * SensorOutputVoltage - char, si unit of sensor bridge outputs
% * MagneticFieldStrength - char, si unit of magnetic field strength
% * Angles - char, si unit of angles
% * Length - char, si unit of metric length
%
% *Data:*
%
% * HxScale - 1 x L double vector of Hx field strength amplitudes used in
%   charcteriztion to construct sensor characterization references, x scale for
%   characterization reference
% * HyScale - 1 x L double vector of Hy field strength amplitudes used in
%   charcteriztion to construct sensor characterization references, y scale for
%   characterization reference
% * VcosRef - L x L double matrix of cosine bridge characterization field
%   corresponding to HxScale and HyScale
% * VsinRef - L x L double matrix of sine bridge characterization field
%   corresponding to HxScale and HyScale
% * Gain - double, scalar gain factor for bridge outputs (interanl
%   amplification)
% * r0 - 3 x 1 double vector of magnet rest position from magnet surface and
%   respect to magnet magnet tilt, used in computation of H0norm to imprint a
%   certain field strength on magnets H-field, respects sphere radius of magnet
% * m0 - 3 x 1 vector of magnetic dipole moment in magnet rest position with
%   respect of manget tilt, used to compute H0norm to imprint a certain field
%   strength on magnet H-field, the magnitude of this vector is equal to M0mag
% * H0norm - double, scalar factor to imprint a certain field strength on magnet
%   H-field in rest position with respect to magnet tilt in coordinate system
% * m - 3 x M double vector of magnetic dipole rotation moments each 3 x 1
%   vector is related to i-th rotation angle
% * angles - 1 x M double vector of i-th rotation angles in degree
% * angleStep - double, scalar of angle step width in rotation
% * angleRefIndex - 1 x M double vector of indices which refer to a full scale
%   rotation of configure angle resuolution, so it abstracts a subset angle
%   rotation to the same rotation with all angles given by angle resolution
% * X - N x N double matrix of x coordinate positions of each sensor array
%   member
% * Y - N x N double matrix of y coordinate positions of each sensor array
%   member
% * Z - N x N double matrix of z coordinate positions of each sensor array
%   member
% * Hx - N x N x M double matrix of compute Hx-field strength at each sensor
%   array member position for each rotation angle 1...M 
% * Hy - N x N x M double matrix of compute Hy-field strength at each sensor
%   array member position for each rotation angle 1...M 
% * Hz - N x N x M double matrix of compute Hz-field strength at each sensor
%   array member position for each rotation angle 1...M 
% * Habs - N x N x M double matrix of compute H-field strength magnitude at each
%   sensor array member position for each rotation angle 1...M 
% * Vcos - N x N x M double matrix of computed cosine bridge outputs at each
%   sensor array member position for each rotation angle 1...M
% * Vsin - N x N x M double matrix of computed sine bridge outputs at each
%   sensor array member position for each rotation angle 1...M
%
%
%% See Also
% * <Simulation_Workflow.html Simulation Workflow>
% * <sensorArraySimulation.html sensorArraySimulation>
% * <simulateDipoleSensorArraySquareGrid.html simulateDipoleSensorArraySquareGrid>
% * <generateSimulationDatasets.html generateSimulationDatasets>
% * <generateConfigMat.html generateConfigMat>
%
%
% Created on December 03. 2020 by Tobias Wulf. Copyright Tobias Wulf 2020.
%
% <html>
% <!REPLACE_WITH_DASH_DASH
% Hidden Clutter.
% Edited on Month DD. YYYY by Editor: Single line description.
% Edited on December 03. 2020 by Tobias Wulf: Add UseOption field BaseReference.
% Edited on December 05. 2020 by Tobias Wulf: Add Gain for reference voltages.
% REPLACE_WITH_DASH_DASH>
% </html>
%
%
##### SOURCE END #####
--></body></html>